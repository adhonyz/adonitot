<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Container Board Packaging - Delivery Scheduling System</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1d29;
            color: #fff;
            min-height: 100vh;
        }

        /* Login Page Styles */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1d29 0%, #2c3040 100%);
        }

        .login-box {
            background-color: #2c3040;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            width: 400px;
            text-align: center;
        }

        .login-logo {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 30px;
            font-size: 24px;
            font-weight: 600;
        }

        .login-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .form-group {
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #9ca3af;
            font-size: 14px;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            background-color: #1a1d29;
            border: 1px solid #3a3f52;
            border-radius: 6px;
            color: #fff;
            font-size: 14px;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .login-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
            transition: opacity 0.2s;
            margin-top: 10px;
        }

        .login-btn:hover {
            opacity: 0.9;
        }

        /* Dashboard Styles */
        .dashboard-container { /* Renamed from .dashboard to avoid confusion with internal sections */
            display: none;
            min-height: 100vh;
        }

        .header {
            background-color: #2c3040;
            padding: 12px 20px;
            border-bottom: 1px solid #3a3f52;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .nav-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            color: #fff;
        }

        .nav-tabs {
            display: flex;
            gap: 30px;
        }

        .nav-tab {
            color: #9ca3af;
            text-decoration: none;
            font-size: 14px;
            transition: color 0.2s;
            cursor: pointer;
            padding: 5px 0;
            border-bottom: 2px solid transparent;
        }

        .nav-tab:hover, .nav-tab.active {
            color: #fff;
            border-bottom: 2px solid #667eea;
        }

        .user-menu {
            position: relative;
        }

        .user-info {
            color: #9ca3af;
            font-size: 14px;
            cursor: pointer;
            padding: 8px 12px;
            border-radius: 6px;
            transition: background-color 0.2s;
        }

        .user-info:hover {
            background-color: #374151;
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            background-color: #2c3040;
            border: 1px solid #3a3f52;
            border-radius: 6px;
            min-width: 150px;
            display: none;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .user-dropdown.show {
            display: block;
        }

        .dropdown-item {
            padding: 10px 15px;
            cursor: pointer;
            color: #9ca3af;
            transition: background-color 0.2s;
            border-bottom: 1px solid #3a3f52;
        }

        .dropdown-item:last-child {
            border-bottom: none;
        }

        .dropdown-item:hover {
            background-color: #374151;
            color: #fff;
        }

        .content-section {
            padding: 20px;
        }

        .main-header {
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #3a3f52;
        }

        .page-title {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: 600;
        }

        .new-delivery-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: opacity 0.2s;
        }

        .new-delivery-btn:hover {
            opacity: 0.9;
        }

        .filters {
            padding: 20px;
            display: flex;
            gap: 20px;
            border-bottom: 1px solid #3a3f52;
        }

        .filter-dropdown {
            background-color: #2c3040;
            border: 1px solid #3a3f52;
            border-radius: 6px;
            padding: 8px 12px;
            color: #fff;
            font-size: 14px;
            min-width: 120px;
            cursor: pointer;
        }

        .search-box {
            background-color: #2c3040;
            border: 1px solid #3a3f52;
            border-radius: 6px;
            padding: 8px 12px;
            color: #fff;
            font-size: 14px;
            width: 200px;
            margin-left: auto;
        }

        .search-box::placeholder {
            color: #6b7280;
        }

        .table-container {
            padding: 20px;
            overflow-x: auto;
        }

        .delivery-table, .logistics-table {
            width: 100%;
            border-collapse: collapse;
            background-color: #2c3040;
            border-radius: 8px;
            overflow: hidden;
        }

        .delivery-table th, .logistics-table th {
            background-color: #374151;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: #9ca3af;
            font-size: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .delivery-table td, .logistics-table td {
            padding: 15px;
            border-top: 1px solid #3a3f52;
            vertical-align: middle;
        }

        .delivery-table tr:hover, .logistics-table tr:hover {
            background-color: #374151;
        }

        .editable {
            cursor: pointer;
            padding: 4px 8px;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .editable:hover {
            background-color: #374151;
        }

        .edit-input {
            background-color: #1a1d29;
            border: 1px solid #667eea;
            border-radius: 4px;
            padding: 4px 8px;
            color: #fff;
            font-size: 14px;
            width: 100%;
        }

        .edit-select {
            background-color: #1a1d29;
            border: 1px solid #667eea;
            border-radius: 4px;
            padding: 4px 8px;
            color: #fff;
            font-size: 14px;
            width: 100%;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            cursor: pointer;
        }

        .status-urgent { background-color: #fbbf24; color: #92400e; }
        .status-low { background-color: #10b981; color: #065f46; } /* Used for 'low' priority and 'delivered' status */
        .status-inactive { background-color: #6b7280; color: #fff; } /* Not currently used but kept for consistency */
        .status-with-stock { background-color: #3b82f6; color: #1e40af; }
        .status-no-stock { background-color: #ef4444; color: #991b1b; }
        .status-delivered { background-color: #10b981; color: #065f46; }
        .status-pending { background-color: #f59e0b; color: #92400e; }
        .status-in-transit { background-color: #8b5cf6; color: #5b21b6; } /* Used for 'pre-ops' and 'high' priority */
        .status-finished { background-color: #22c55e; color: #166534; }
        .status-completed { background-color: #22c55e; color: #166534; }


        .customer-name {
            font-weight: 500;
            color: #fff;
            cursor: pointer;
        }

        .order-no {
            font-weight: 600;
            color: #667eea;
            cursor: pointer;
        }

        .date-time {
            font-size: 13px;
            color: #9ca3af;
            cursor: pointer;
        }

        .actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            padding: 6px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: opacity 0.2s;
        }

        .action-btn:hover {
            opacity: 0.8;
        }

        .btn-view { background-color: #374151; color: #9ca3af; }
        .btn-edit { background-color: #1f2937; color: #9ca3af; }
        .btn-delete { background-color: #dc2626; color: #fff; }
        .btn-schedule-delivery {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: opacity 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .btn-schedule-delivery:hover {
            opacity: 0.9;
        }
        .btn-completed {
            background-color: #22c55e;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: opacity 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        .btn-completed:hover {
            opacity: 0.9;
        }


        .icon {
            width: 16px;
            height: 16px;
            fill: currentColor;
        }

        .truck-icon {
            width: 20px;
            height: 20px;
            fill: #fff;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center; /* Center modal horizontally */
            align-items: center; /* Center modal vertically */
        }

        .modal-content {
            background-color: #2c3040;
            padding: 30px;
            border-radius: 12px;
            width: 80%;
            max-width: 600px;
            color: #fff;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }


        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: 600;
        }

        .close {
            color: #9ca3af;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #fff;
        }

        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-col {
            flex: 1;
        }

        .modal-form label {
            display: block;
            margin-bottom: 5px;
            color: #9ca3af;
            font-size: 14px;
        }

        .modal-form input,
        .modal-form select {
            width: 100%;
            padding: 10px;
            background-color: #1a1d29;
            border: 1px solid #3a3f52;
            border-radius: 6px;
            color: #fff;
            font-size: 14px;
        }

        .modal-form input:focus,
        .modal-form select:focus {
            outline: none;
            border-color: #667eea;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 30px;
        }

        .btn-save {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: opacity 0.2s;
        }
        .btn-save:hover {
            opacity: 0.9;
        }


        .btn-cancel {
            background-color: #6b7280;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: opacity 0.2s;
        }
        .btn-cancel:hover {
            opacity: 0.9;
        }

        .hidden {
            display: none !important; /* Use !important to ensure override */
        }

        /* View Modal Specific Styles */
        .view-field {
            margin-bottom: 15px;
        }

        .view-field label {
            font-weight: bold;
            color: #9ca3af;
            font-size: 14px;
            display: block;
            margin-bottom: 5px;
        }

        .view-field span {
            color: #fff;
            font-size: 16px;
        }

        /* Logistics Dashboard Specific Styles */
        .logistics-overview {
            display: flex;
            justify-content: space-around;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .metric-card {
            background-color: #2c3040;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            flex: 1;
            min-width: 250px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .metric-value {
            font-size: 40px;
            font-weight: 700;
            margin-bottom: 10px;
        }
        .metric-value.ready { color: #10b981; } /* Green */
        .metric-value.available { color: #3b82f6; } /* Blue */
        .metric-value.scheduled { color: #f59e0b; } /* Orange */


        .metric-label {
            font-size: 16px;
            color: #9ca3af;
        }

        .section-header {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #fff;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-header svg {
            width: 24px;
            height: 24px;
            fill: #fff;
        }

        .logistics-table-container {
            margin-bottom: 40px;
            padding: 0 20px; /* Adjust padding if needed */
        }
        .logistics-table-container:last-child {
             margin-bottom: 20px;
        }

        .logistics-table th {
            padding: 12px 15px;
        }
        .logistics-table td {
            padding: 12px 15px;
        }

        .quantity-cell {
            font-weight: 600;
            color: #10b981;
        }

        .truck-tag {
            background-color: #3b82f6;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

    </style>
</head>
<body>
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <div class="login-logo">
                <svg class="truck-icon" viewBox="0 0 24 24">
                    <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                </svg>
                Container Board Packaging
            </div>
            <form class="login-form" onsubmit="login(event)">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" class="form-input" placeholder="Enter your username" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" class="form-input" placeholder="Enter your password" required>
                </div>
                <button type="submit" class="login-btn">Login</button>
            </form>
        </div>
    </div>

    <div id="dashboardContainer" class="dashboard-container">
        <header class="header">
            <div class="nav-left">
                <div class="logo">
                    <svg class="truck-icon" viewBox="0 0 24 24">
                        <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                    </svg>
                    Delivery Scheduling System
                </div>
                <nav class="nav-tabs">
                    <a href="#" class="nav-tab active" id="tabLogisticsDashboard" onclick="showSection('logisticsDashboardSection', this)">Logistics Dashboard</a>
                    <a href="#" class="nav-tab" id="tabDeliveryManagement" onclick="showSection('deliveryManagementSection', this)">Deliveries</a>
                    <a href="#" class="nav-tab">Customers</a>
                    <a href="#" class="nav-tab">Reports</a>
                </nav>
            </div>
            <div class="user-menu">
                <div class="user-info" onclick="toggleUserDropdown()">
                    <span id="currentUser">Mona Ghali (COO)</span> â–¼
                </div>
                <div id="userDropdown" class="user-dropdown">
                    <div class="dropdown-item" onclick="viewProfile()">View Profile</div>
                    <div class="dropdown-item" onclick="logout()">Logout</div>
                </div>
            </div>
        </header>

        <div id="logisticsDashboardSection" class="content-section">
            <div class="main-header">
                <h1 class="page-title">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/>
                    </svg>
                    Logistics Dashboard
                </h1>
                <div class="last-updated" style="font-size: 14px; color: #9ca3af;">
                    Last updated: <span id="lastUpdatedTime"></span>
                </div>
            </div>

            <div class="logistics-overview" id="logisticsOverviewMetrics">
                </div>

            <div class="section-header">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M12 2c-4.97 0-9 4.03-9 9 0 4.25 2.92 7.82 7 8.76V22h4v-2.24c4.08-.94 7-4.51 7-8.76 0-4.97-4.03-9-9-9zm0 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z"/>
                </svg>
                Items Ready for Delivery
            </div>
            <div class="table-container">
                <table class="logistics-table">
                    <thead>
                        <tr>
                            <th>Customer</th>
                            <th>Model</th>
                            <th>Description</th>
                            <th>Quantity</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="itemsReadyForDeliveryTableBody">
                        </tbody>
                </table>
            </div>

            <div class="section-header">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/>
                </svg>
                Scheduled Deliveries
            </div>
            <div class="table-container">
                <table class="logistics-table">
                    <thead>
                        <tr>
                            <th>Customer</th>
                            <th>Model</th>
                            <th>Truck</th>
                            <th>Delivery Date</th>
                            <th>Time</th>
                            <th>Status</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="scheduledDeliveriesTableBody">
                        </tbody>
                </table>
            </div>
        </div>

        <div id="deliveryManagementSection" class="content-section hidden">
            <div class="main-header">
                <h1 class="page-title">
                    <svg class="truck-icon" viewBox="0 0 24 24">
                        <path d="M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/>
                    </svg>
                    Deliveries Management
                </h1>
                <button class="new-delivery-btn" onclick="openNewDeliveryModal()">+ New Delivery</button>
            </div>

            <div class="filters">
                <select id="filterStatus" class="filter-dropdown" onchange="filterTable()">
                    <option value="">All Statuses</option>
                    <option value="urgent">Urgent</option>
                    <option value="pending">Pending</option>
                    <option value="delivered">Delivered</option>
                </select>
                <select id="filterLocation" class="filter-dropdown" onchange="filterTable()">
                    <option value="">All Locations</option>
                    <option value="warehouse1">Warehouse 1</option>
                    <option value="warehouse2">Warehouse 2</option>
                </select>
                <select id="filterCustomer" class="filter-dropdown" onchange="filterTable()">
                    <option value="">All Customers</option>
                    <option value="Panasonic">Panasonic</option>
                    <option value="Honda Parts">Honda Parts</option>
                    <option value="Insitu">Insitu</option>
                </select>
                <input type="text" id="searchBox" class="search-box" placeholder="Search deliveries..." oninput="filterTable()">
            </div>

            <div class="table-container">
                <table class="delivery-table">
                    <thead>
                        <tr>
                            <th>Order No.</th>
                            <th>Customer</th>
                            <th>Status</th>
                            <th>Stock</th>
                            <th>Priority</th>
                            <th>Driver</th>
                            <th>Created</th>
                            <th>Start Time</th>
                            <th>End Time</th>
                            <th>Delivery Status</th>
                            <th>Finished</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody id="deliveryTableBody">
                        </tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="deliveryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">Add New Delivery</h2>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <form class="modal-form" onsubmit="saveDelivery(event)">
                <div class="form-row">
                    <div class="form-col">
                        <label for="orderNo">Order No.</label>
                        <input type="text" id="orderNo" required>
                    </div>
                    <div class="form-col">
                        <label for="customer">Customer</label>
                        <input type="text" id="customer" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <label for="status">Status</label>
                        <select id="status">
                            <option value="urgent">Urgent</option>
                            <option value="pending">Pending</option>
                            <option value="delivered">Delivered</option>
                        </select>
                    </div>
                    <div class="form-col">
                        <label for="stock">Stock</label>
                        <select id="stock">
                            <option value="with-stock">With Stock</option>
                            <option value="no-stock">No Stock</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <label for="priority">Priority</label>
                        <select id="priority">
                            <option value="pre-ops">Pre-Ops</option>
                            <option value="high">High</option>
                            <option value="low">Low</option>
                        </select>
                    </div>
                    <div class="form-col">
                        <label for="driver">Driver</label>
                        <input type="text" id="driver" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <label for="createdDate">Created Date</label>
                        <input type="datetime-local" id="createdDate" required>
                    </div>
                    <div class="form-col">
                        <label for="startTime">Start Time</label>
                        <input type="datetime-local" id="startTime" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <label for="endTime">End Time</label>
                        <input type="datetime-local" id="endTime" required>
                    </div>
                     <div class="form-col">
                        <label for="deliveryStatus">Delivery Status</label>
                        <select id="deliveryStatus">
                            <option value="pending">Pending</option>
                            <option value="delivered">Delivered</option>
                            <option value="in-transit">In Transit</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col">
                        <label for="finished">Finished</label>
                        <select id="finished">
                            <option value="pending">Pending</option>
                            <option value="finished">Finished</option>
                        </select>
                    </div>
                    <div class="form-col">
                        </div>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn-cancel" onclick="closeModal()">Cancel</button>
                    <button type="submit" class="btn-save">Save Delivery</button>
                </div>
            </form>
        </div>
    </div>

    <div id="viewDeliveryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Delivery Details</h2>
                <span class="close" onclick="closeViewModal()">&times;</span>
            </div>
            <div id="deliveryDetails" class="modal-body">
                </div>
            <div class="modal-actions">
                <button type="button" class="btn-cancel" onclick="closeViewModal()">Close</button>
            </div>
        </div>
    </div>

    <script>
        // Sample data for Deliveries Management
        let deliveries = [
            {
                id: 1,
                orderNo: '#1',
                customer: 'Panasonic',
                status: 'urgent', // This is the 'Status' column in table
                stock: 'with-stock',
                priority: 'pre-ops',
                driver: 'Justin Santos',
                created: '2025-06-08T23:40', // Example: 'YYYY-MM-DDTHH:MM'
                startTime: '2025-06-08T23:30',
                endTime: '2025-06-09T00:15',
                deliveryStatus: 'delivered', // This is the 'Delivery Status' column
                finished: 'finished',
                location: 'warehouse1' // Added for filtering
            },
            {
                id: 2,
                orderNo: '#2',
                customer: 'Honda Parts',
                status: 'pending',
                stock: 'no-stock',
                priority: 'high', // Changed from pre-ops to high for variety
                driver: 'Maria Cruz',
                created: '2025-06-05T08:10',
                startTime: '2025-06-05T08:30',
                endTime: '2025-06-05T09:45',
                deliveryStatus: 'pending', // Changed to pending for example
                finished: 'pending',
                location: 'warehouse2' // Added for filtering
            },
            {
                id: 3,
                orderNo: '#3',
                customer: 'Insitu',
                status: 'urgent',
                stock: 'with-stock',
                priority: 'low', // Changed from pre-ops to low for variety
                driver: 'Justin Santos',
                created: '2025-06-01T23:00',
                startTime: '2025-06-01T23:45',
                endTime: '2025-06-02T00:15',
                deliveryStatus: 'in-transit', // Changed to in-transit for example
                finished: 'pending',
                location: 'warehouse1' // Added for filtering
            },
            {
                id: 4,
                orderNo: '#4',
                customer: 'Panasonic',
                status: 'pending',
                stock: 'with-stock',
                priority: 'high',
                driver: 'Maria Cruz',
                created: '2025-06-07T10:00',
                startTime: '2025-06-07T10:30',
                endTime: '2025-06-07T11:45',
                deliveryStatus: 'pending',
                finished: 'pending',
                location: 'warehouse2'
            }
        ];

        // Sample data for Logistics Dashboard
        let logisticsData = {
            lastUpdated: '6/4/2025, 4:54:55 PM', // From image
            metrics: {
                readyForDelivery: 1,
                availableTrucks: 2,
                scheduledDeliveries: 1
            },
            itemsReady: [
                {
                    id: 1,
                    customer: 'PRECISION INDUSTRIES CORP.',
                    customerID: 'ID: 3',
                    model: 'CUSTOM MR-10 BRACKET',
                    description: 'STEEL BRACKET W/ COATING',
                    quantity: '75 PC/S'
                }
            ],
            scheduledDeliveries: [
                {
                    id: 1,
                    customer: 'EMD TECHNOLOGIES PHILIPPINES INC.',
                    customerQuantity: '100 PC/S',
                    model: 'MODIFIED MR-15 SLEEVE',
                    truck: 'Truck 8',
                    deliveryDate: '2025-06-05',
                    time: '09:00',
                    status: 'completed'
                }
            ]
        };


        let currentEditingId = null;
        let nextDeliveryId = deliveries.length > 0 ? Math.max(...deliveries.map(d => d.id)) + 1 : 1; // Ensure unique IDs

        // Login function
        function login(event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Simplified authentication: Any non-empty username/password will work for this demo
            if (username && password) {
                document.getElementById('loginPage').style.display = 'none';
                document.getElementById('dashboardContainer').style.display = 'block';
                document.getElementById('currentUser').textContent = `${username} (COO)`;
                
                // Show Logistics Dashboard by default on login
                showSection('logisticsDashboardSection', document.getElementById('tabLogisticsDashboard'));
            } else {
                alert('Please enter a username and password.');
            }
        }

        // Logout function
        function logout() {
            document.getElementById('dashboardContainer').style.display = 'none';
            document.getElementById('loginPage').style.display = 'flex';
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            document.getElementById('userDropdown').classList.remove('show'); // Hide dropdown on logout
        }

        // Toggle user dropdown
        function toggleUserDropdown() {
            const dropdown = document.getElementById('userDropdown');
            dropdown.classList.toggle('show');
        }

        // View profile (placeholder)
        function viewProfile() {
            alert('Profile view functionality would be implemented here');
            toggleUserDropdown();
        }

        // Function to switch between sections
        function showSection(sectionId, clickedTab) {
            // Hide all content sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.add('hidden');
            });

            // Remove active class from all tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show the selected section and set active tab
            document.getElementById(sectionId).classList.remove('hidden');
            if (clickedTab) {
                clickedTab.classList.add('active');
            }

            // Render content specific to the activated section
            if (sectionId === 'deliveryManagementSection') {
                renderTable(); // Render delivery table when Deliveries tab is active
            } else if (sectionId === 'logisticsDashboardSection') {
                renderLogisticsDashboard(); // Render logistics dashboard
            }
        }

        // Render Deliveries Management Table
        function renderTable() {
            const tbody = document.getElementById('deliveryTableBody');
            tbody.innerHTML = '';

            const filterStatus = document.getElementById('filterStatus').value;
            const filterLocation = document.getElementById('filterLocation').value;
            const filterCustomer = document.getElementById('filterCustomer').value;
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();

            const filteredDeliveries = deliveries.filter(delivery => {
                const matchesStatus = filterStatus === '' || delivery.status === filterStatus;
                const matchesLocation = filterLocation === '' || delivery.location === filterLocation;
                const matchesCustomer = filterCustomer === '' || delivery.customer === filterCustomer;
                const matchesSearch = searchTerm === '' ||
                                      delivery.orderNo.toLowerCase().includes(searchTerm) ||
                                      delivery.customer.toLowerCase().includes(searchTerm) ||
                                      delivery.driver.toLowerCase().includes(searchTerm) ||
                                      delivery.deliveryStatus.toLowerCase().includes(searchTerm) ||
                                      delivery.finished.toLowerCase().includes(searchTerm);

                return matchesStatus && matchesLocation && matchesCustomer && matchesSearch;
            });

            if (filteredDeliveries.length === 0) {
                tbody.innerHTML = '<tr><td colspan="12" style="text-align: center; padding: 20px; color: #9ca3af;">No deliveries found matching your criteria.</td></tr>';
                return;
            }

            filteredDeliveries.forEach(delivery => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="order-no editable" onclick="editField(${delivery.id}, 'orderNo', '${delivery.orderNo}')">${delivery.orderNo}</td>
                    <td class="customer-name editable" onclick="editField(${delivery.id}, 'customer', '${delivery.customer}')">${delivery.customer}</td>
                    <td><span class="status-badge status-${delivery.status} editable" onclick="editStatusField(${delivery.id}, 'status', '${delivery.status}')">${delivery.status.charAt(0).toUpperCase() + delivery.status.slice(1)}</span></td>
                    <td><span class="status-badge status-${delivery.stock} editable" onclick="editStatusField(${delivery.id}, 'stock', '${delivery.stock}')">${delivery.stock === 'with-stock' ? 'With Stock' : 'No Stock'}</span></td>
                    <td><span class="status-badge status-${delivery.priority === 'pre-ops' || delivery.priority === 'high' ? 'in-transit' : delivery.priority} editable" onclick="editStatusField(${delivery.id}, 'priority', '${delivery.priority}')">${delivery.priority.charAt(0).toUpperCase() + delivery.priority.slice(1)}</span></td>
                    <td class="customer-name editable" onclick="editField(${delivery.id}, 'driver', '${delivery.driver}')">${delivery.driver}</td>
                    <td class="date-time editable" onclick="editDateField(${delivery.id}, 'created', '${delivery.created}')">${formatDateTime(delivery.created)}</td>
                    <td class="date-time editable" onclick="editDateField(${delivery.id}, 'startTime', '${delivery.startTime}')">${formatTime(delivery.startTime)}</td>
                    <td class="date-time editable" onclick="editDateField(${delivery.id}, 'endTime', '${delivery.endTime}')">${formatTime(delivery.endTime)}</td>
                    <td><span class="status-badge status-${delivery.deliveryStatus} editable" onclick="editStatusField(${delivery.id}, 'deliveryStatus', '${delivery.deliveryStatus}')">${delivery.deliveryStatus.charAt(0).toUpperCase() + delivery.deliveryStatus.slice(1)}</span></td>
                    <td><span class="status-badge status-${delivery.finished} editable" onclick="editStatusField(${delivery.id}, 'finished', '${delivery.finished}')">${delivery.finished.charAt(0).toUpperCase() + delivery.finished.slice(1)}</span></td>
                    <td class="actions">
                        <button class="action-btn btn-view" onclick="viewDelivery(${delivery.id})">View</button>
                        <button class="action-btn btn-edit" onclick="editDelivery(${delivery.id})">Edit</button>
                        <button class="action-btn btn-delete" onclick="deleteDelivery(${delivery.id})">Delete</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Format date and time for Deliveries Management table
        function formatDateTime(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            if (isNaN(date.getTime())) return 'Invalid Date'; // Handle invalid date strings
            return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' }) + '<br>' + date.toLocaleTimeString('en-US', { hour: '2-digit', minute:'2-digit', hour12: true });
        }

        function formatTime(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            if (isNaN(date.getTime())) return 'Invalid Time'; // Handle invalid date strings
            return date.toLocaleTimeString('en-US', { hour: '2-digit', minute:'2-digit', hour12: true });
        }

        // Edit field inline
        function editField(id, field, currentValue) {
            const delivery = deliveries.find(d => d.id === id);
            if (!delivery) return;

            const newValue = prompt(`Edit ${field}:`, currentValue);
            if (newValue !== null && newValue.trim() !== '' && newValue !== currentValue) {
                delivery[field] = newValue.trim();
                renderTable();
            }
        }

        // Edit status field with dropdown (using prompt for simplicity, could be a small inline select)
        function editStatusField(id, field, currentValue) {
            const delivery = deliveries.find(d => d.id === id);
            if (!delivery) return;

            let options = [];
            let displayOptions = []; // For user-friendly display in prompt
            switch(field) {
                case 'status':
                    options = ['urgent', 'pending', 'delivered'];
                    displayOptions = ['Urgent', 'Pending', 'Delivered'];
                    break;
                case 'stock':
                    options = ['with-stock', 'no-stock'];
                    displayOptions = ['With Stock', 'No Stock'];
                    break;
                case 'priority':
                    options = ['pre-ops', 'high', 'low'];
                    displayOptions = ['Pre-Ops', 'High', 'Low'];
                    break;
                case 'deliveryStatus':
                    options = ['pending', 'delivered', 'in-transit'];
                    displayOptions = ['Pending', 'Delivered', 'In Transit'];
                    break;
                case 'finished':
                    options = ['pending', 'finished'];
                    displayOptions = ['Pending', 'Finished'];
                    break;
                default:
                    return; // Do nothing if field is not a known status field
            }

            const optionsText = options.map((opt, index) => `${index + 1}. ${displayOptions[index]}`).join('\n');
            const choice = prompt(`Select ${field}:\n${optionsText}\n\nEnter number (1-${options.length}):`);

            if (choice && !isNaN(choice) && parseInt(choice) >= 1 && parseInt(choice) <= options.length) {
                delivery[field] = options[parseInt(choice) - 1];
                renderTable();
            }
        }

        // Edit date field
        function editDateField(id, field, currentValue) {
            const delivery = deliveries.find(d => d.id === id);
            if (!delivery) return;

            // Prompt for new date/time in local format or ISO string for input[type="datetime-local"]
            const newValue = prompt(`Edit ${field} (e.g.,YYYY-MM-DDTHH:MM):\n(Current: ${currentValue})`, currentValue);
            if (newValue !== null && newValue.trim() !== '' && newValue !== currentValue) {
                // Validate input format if necessary
                // A simple check to ensure it's a valid datetime-local format
                if (new Date(newValue).toString() !== 'Invalid Date' && newValue.includes('T') && newValue.split('T')[1].length >= 5) {
                    delivery[field] = newValue.trim();
                    renderTable();
                } else {
                    alert('Invalid date/time format. Please use YYYY-MM-DDTHH:MM.');
                }
            }
        }

        // Open new delivery modal
        function openNewDeliveryModal() {
            currentEditingId = null;
            document.getElementById('modalTitle').textContent = 'Add New Delivery';
            // Clear all fields for new entry
            document.getElementById('orderNo').value = `#${nextDeliveryId}`; // Pre-fill with a suggestion
            document.getElementById('customer').value = '';
            document.getElementById('status').value = 'pending';
            document.getElementById('stock').value = 'with-stock';
            document.getElementById('priority').value = 'pre-ops';
            document.getElementById('driver').value = '';
            // Set current datetime for 'Created' and 'Start Time' for convenience
            const now = new Date();
            const year = now.getFullYear();
            const month = (now.getMonth() + 1).toString().padStart(2, '0');
            const day = now.getDate().toString().padStart(2, '0');
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const currentDateTime = `${year}-${month}-${day}T${hours}:${minutes}`;

            document.getElementById('createdDate').value = currentDateTime;
            document.getElementById('startTime').value = currentDateTime;
            document.getElementById('endTime').value = ''; // End time usually left blank for new delivery
            document.getElementById('deliveryStatus').value = 'pending';
            document.getElementById('finished').value = 'pending';

            document.getElementById('deliveryModal').style.display = 'flex'; // Use flex to center
        }

        // Edit delivery
        function editDelivery(id) {
            const delivery = deliveries.find(d => d.id === id);
            if (!delivery) return;

            currentEditingId = id;
            document.getElementById('modalTitle').textContent = 'Edit Delivery';
            document.getElementById('orderNo').value = delivery.orderNo;
            document.getElementById('customer').value = delivery.customer;
            document.getElementById('status').value = delivery.status;
            document.getElementById('stock').value = delivery.stock;
            document.getElementById('priority').value = delivery.priority;
            document.getElementById('driver').value = delivery.driver;
            document.getElementById('createdDate').value = delivery.created;
            document.getElementById('startTime').value = delivery.startTime;
            document.getElementById('endTime').value = delivery.endTime;
            document.getElementById('deliveryStatus').value = delivery.deliveryStatus;
            document.getElementById('finished').value = delivery.finished; // Set finished status

            document.getElementById('deliveryModal').style.display = 'flex'; // Use flex to center
        }

        // Save Delivery (Add or Update)
        function saveDelivery(event) {
            event.preventDefault();

            const orderNo = document.getElementById('orderNo').value.trim();
            const customer = document.getElementById('customer').value.trim();
            const status = document.getElementById('status').value;
            const stock = document.getElementById('stock').value;
            const priority = document.getElementById('priority').value;
            const driver = document.getElementById('driver').value.trim();
            const created = document.getElementById('createdDate').value;
            const startTime = document.getElementById('startTime').value;
            const endTime = document.getElementById('endTime').value;
            const deliveryStatus = document.getElementById('deliveryStatus').value;
            const finished = document.getElementById('finished').value;

            // Simple validation
            if (!orderNo || !customer || !driver || !created || !startTime) {
                alert('Please fill all required fields: Order No., Customer, Driver, Created Date, Start Time.');
                return;
            }

            if (currentEditingId) {
                // Update existing delivery
                const deliveryIndex = deliveries.findIndex(d => d.id === currentEditingId);
                if (deliveryIndex > -1) {
                    deliveries[deliveryIndex] = {
                        ...deliveries[deliveryIndex], // Keep existing properties like location if not in modal
                        orderNo,
                        customer,
                        status,
                        stock,
                        priority,
                        driver,
                        created,
                        startTime,
                        endTime,
                        deliveryStatus,
                        finished
                    };
                    alert('Delivery updated successfully!');
                }
            } else {
                // Add new delivery
                const newDelivery = {
                    id: nextDeliveryId++,
                    orderNo,
                    customer,
                    status,
                    stock,
                    priority,
                    driver,
                    created,
                    startTime,
                    endTime,
                    deliveryStatus,
                    finished,
                    location: 'warehouse1' // Default location for new entries
                };
                deliveries.push(newDelivery);
                alert('New delivery added successfully!');
            }

            closeModal();
            renderTable(); // Re-render table to show changes
        }

        // Close modal
        function closeModal() {
            document.getElementById('deliveryModal').style.display = 'none';
        }

        // View Delivery Details
        function viewDelivery(id) {
            const delivery = deliveries.find(d => d.id === id);
            if (!delivery) {
                alert('Delivery not found.');
                return;
            }

            const detailsHtml = `
                <div class="form-row">
                    <div class="form-col view-field">
                        <label>Order No.:</label><span>${delivery.orderNo}</span>
                    </div>
                    <div class="form-col view-field">
                        <label>Customer:</label><span>${delivery.customer}</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col view-field">
                        <label>Status:</label><span class="status-badge status-${delivery.status}">${delivery.status.charAt(0).toUpperCase() + delivery.status.slice(1)}</span>
                    </div>
                    <div class="form-col view-field">
                        <label>Stock:</label><span class="status-badge status-${delivery.stock}">${delivery.stock === 'with-stock' ? 'With Stock' : 'No Stock'}</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col view-field">
                        <label>Priority:</label><span class="status-badge status-${delivery.priority === 'pre-ops' || delivery.priority === 'high' ? 'in-transit' : delivery.priority}">${delivery.priority.charAt(0).toUpperCase() + delivery.priority.slice(1)}</span>
                    </div>
                    <div class="form-col view-field">
                        <label>Driver:</label><span>${delivery.driver}</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col view-field">
                        <label>Created:</label><span>${formatDateTime(delivery.created).replace('<br>', ' ')}</span>
                    </div>
                     <div class="form-col view-field">
                        <label>Start Time:</label><span>${formatTime(delivery.startTime)}</span>
                    </div>
                </div>
                 <div class="form-row">
                    <div class="form-col view-field">
                        <label>End Time:</label><span>${delivery.endTime ? formatTime(delivery.endTime) : 'N/A'}</span>
                    </div>
                    <div class="form-col view-field">
                        <label>Delivery Status:</label><span class="status-badge status-${delivery.deliveryStatus}">${delivery.deliveryStatus.charAt(0).toUpperCase() + delivery.deliveryStatus.slice(1)}</span>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-col view-field">
                        <label>Finished:</label><span class="status-badge status-${delivery.finished}">${delivery.finished.charAt(0).toUpperCase() + delivery.finished.slice(1)}</span>
                    </div>
                     <div class="form-col view-field">
                        <label>Location:</label><span>${delivery.location === 'warehouse1' ? 'Warehouse 1' : 'Warehouse 2'}</span>
                    </div>
                </div>
            `;
            document.getElementById('deliveryDetails').innerHTML = detailsHtml;
            document.getElementById('viewDeliveryModal').style.display = 'flex';
        }

        // Close View Modal
        function closeViewModal() {
            document.getElementById('viewDeliveryModal').style.display = 'none';
        }

        // Delete Delivery
        function deleteDelivery(id) {
            if (confirm('Are you sure you want to delete this delivery?')) {
                deliveries = deliveries.filter(d => d.id !== id);
                renderTable();
                alert('Delivery deleted successfully!');
            }
        }

        // Filter Table (called by dropdowns and search input)
        function filterTable() {
            renderTable(); // Re-render table with current filter values
        }

        // --- Logistics Dashboard Functions ---
        function renderLogisticsDashboard() {
            renderLogisticsDashboardMetrics();
            renderItemsReadyForDeliveryTable();
            renderScheduledDeliveriesTable();
            document.getElementById('lastUpdatedTime').textContent = logisticsData.lastUpdated;
        }

        function renderLogisticsDashboardMetrics() {
            const metricsContainer = document.getElementById('logisticsOverviewMetrics');
            metricsContainer.innerHTML = `
                <div class="metric-card">
                    <div class="metric-value ready">${logisticsData.metrics.readyForDelivery}</div>
                    <div class="metric-label">Ready for Delivery</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value available">${logisticsData.metrics.availableTrucks}</div>
                    <div class="metric-label">Available Trucks</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value scheduled">${logisticsData.metrics.scheduledDeliveries}</div>
                    <div class="metric-label">Scheduled Deliveries</div>
                </div>
            `;
        }

        function renderItemsReadyForDeliveryTable() {
            const tbody = document.getElementById('itemsReadyForDeliveryTableBody');
            tbody.innerHTML = '';

            if (logisticsData.itemsReady.length === 0) {
                tbody.innerHTML = '<tr><td colspan="5" style="text-align: center; padding: 20px; color: #9ca3af;">No items ready for delivery.</td></tr>';
                return;
            }

            logisticsData.itemsReady.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <span class="customer-name">${item.customer}</span><br>
                        <span style="font-size: 11px; color: #9ca3af;">${item.customerID}</span>
                    </td>
                    <td>${item.model}</td>
                    <td>${item.description}</td>
                    <td class="quantity-cell">${item.quantity}</td>
                    <td>
                        <button class="action-btn btn-schedule-delivery" onclick="scheduleDelivery('${item.customer}', '${item.model}')">
                            <svg class="icon" viewBox="0 0 24 24" style="width:16px; height:16px; fill:currentColor;"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>
                            Schedule Delivery
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function renderScheduledDeliveriesTable() {
            const tbody = document.getElementById('scheduledDeliveriesTableBody');
            tbody.innerHTML = '';

            if (logisticsData.scheduledDeliveries.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" style="text-align: center; padding: 20px; color: #9ca3af;">No scheduled deliveries.</td></tr>';
                return;
            }

            logisticsData.scheduledDeliveries.forEach(delivery => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        <span class="customer-name">${delivery.customer}</span><br>
                        <span style="font-size: 11px; color: #9ca3af;">${delivery.customerQuantity}</span>
                    </td>
                    <td>${delivery.model}</td>
                    <td><span class="truck-tag">${delivery.truck}</span></td>
                    <td>${delivery.deliveryDate}</td>
                    <td>${delivery.time}</td>
                    <td><span class="status-badge status-${delivery.status}">${delivery.status.charAt(0).toUpperCase() + delivery.status.slice(1)}</span></td>
                    <td>
                        <button class="action-btn btn-completed" onclick="markDeliveryCompleted(${delivery.id})">
                             <svg class="icon" viewBox="0 0 24 24" style="width:16px; height:16px; fill:currentColor;"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>
                            Completed
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Placeholder for logistics actions
        function scheduleDelivery(customer, model) {
            alert(`Scheduling delivery for ${customer}, Model: ${model}. (Functionality to be implemented)`);
            // You would typically open a modal to fill in truck, date, time etc.
        }

        function markDeliveryCompleted(id) {
            alert(`Marking delivery ID ${id} as completed. (Functionality to be implemented)`);
            // In a real app, you'd find the delivery in logisticsData.scheduledDeliveries
            // and update its status, then re-render the table.
            const scheduledDeliveryIndex = logisticsData.scheduledDeliveries.findIndex(d => d.id === id);
            if (scheduledDeliveryIndex > -1) {
                logisticsData.scheduledDeliveries[scheduledDeliveryIndex].status = 'completed';
                renderScheduledDeliveriesTable();
            }
        }


        // Initial render when the page loads (if already logged in, otherwise after login)
        document.addEventListener('DOMContentLoaded', () => {
            // Check if user is "logged in" (for demo purposes, just check if dashboard should be shown)
            // In a real app, you'd use local storage or session storage for login state
            if (document.getElementById('dashboardContainer').style.display === 'block') {
                showSection('logisticsDashboardSection', document.getElementById('tabLogisticsDashboard'));
            }
        });

    </script>
</body>
</html>